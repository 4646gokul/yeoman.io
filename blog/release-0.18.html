<!DOCTYPE html><html lang=en data-version=6cf15a3><head><meta charset=utf-8><title>Yeoman generator version 0.18.0 - Release announcement | Yeoman</title><meta name=viewport content="width=device-width"><link rel=icon type=image/x-icon href=/static/favicon.b25e58c4b8.ico><meta name=google-site-verification content=fBQRJ6h7MV7_TJ7grbgq4P-d-07NRfDWPe4pqEEoH5w><link href="//fonts.googleapis.com/css?family=Roboto+Slab:400,700%7CRoboto:400,700,700italic,400italic" rel=stylesheet><link rel=stylesheet href=/static/bundle-4838.fce9a041d7.css><link href=/blog/atom.xml type=application/atom+xml rel=alternate title="Yeoman Blog Atom Feed"></head><body><header class=page-header><div class=container><div class=mobile-bar><h1 class=logo><a href=/ ><img src=/static/logo.2a54d87108.png alt=Yeoman></a></h1><button class="mobile-menu-toggle ir">open</button></div><nav class=main-menu><ul class=main-nav><li><a href=/learning/ >Using Yeoman</a><ul> <li><a href=/learning/index.html>Getting started</a></li> <li><a href=/codelab/index.html>Tutorial (codelab)</a></li> <li><a href=/learning/resources.html>Resources</a></li> <li><a href=/learning/deployment.html>Deployment</a></li> <li><a href=/learning/faq.html>FAQ</a></li> <li><a href=/learning/support.html>Support</a></li></ul></li><li><a href=/generators/ >Discovering generators</a></li> <li><a href=/authoring/ >Creating a generator</a><ul> <li><a href=/authoring/index.html>Getting started</a></li> <li><a href=/authoring/running-context.html>Running Context</a></li> <li><a href=/authoring/user-interactions.html>User Interactions</a></li> <li><a href=/authoring/composability.html>Composability</a></li> <li><a href=/authoring/dependencies.html>Managing Dependencies</a></li> <li><a href=/authoring/file-system.html>Interacting with the file system</a></li> <li><a href=/authoring/storage.html>Storing user configs</a></li> <li><a href=/authoring/testing.html>Unit testing</a></li> <li><a href=/authoring/debugging.html>Debugging Generators</a></li> <li><a href=/authoring/integrating-yeoman.html>Integrating Yeoman in other tools</a></li> <li><a href=https://yeoman.io/generator/ >Full API documentation</a></li></ul></li><li><a href=/blog/ class=active>Blog</a></li> <li><a href=/contributing/ >Contributing</a><ul> <li><a href=/contributing/index.html>Contributing</a></li> <li><a href=/contributing/opening-issues.html>How to open an issue</a></li> <li><a href=/contributing/pull-request.html>How to submit a PR</a></li> <li><a href=/contributing/style-guide.html>Style Guide</a></li> <li><a href=/contributing/testing-guidelines.html>Testing Guidelines</a></li> <li><a href=/contributing/ticketing.html>Issue system overview</a></li></ul></li></ul></nav></div></header><div class=SiteWrapper><div id=content><h2 class=page-title><span class=container>Yeoman generator version 0.18.0 - Release announcement</span></h2><div class="container clearfix"><article class=main><section class=content-chunk><section><div class="blog-post-meta clearfix"><p class=date>14 Oct 2014</p><div class=social><a href=https://twitter.com/share class=twitter-share-button data-text="" data-url="">Tweet</a><script>!function(a,b,c){var d,e=a.getElementsByTagName(b)[0],f=/^http:/.test(a.location)?'http':'https';a.getElementById(c)||(d=a.createElement(b),d.id=c,d.src=f+'://platform.twitter.com/widgets.js',e.parentNode.insertBefore(d,e))}(document,'script','twitter-wjs')//# sourceMappingURL=../static/yeoman-4999.a4780b8280.map </script><script src=https://apis.google.com/js/plusone.js></script><g:plus action=share></g:plus></div></div><div class=post><p>Allo’ Allo’ today we’re happy to announce the release of <a href=https://www.npmjs.com/package/yeoman-generator>yeoman-generator@0.18.0</a>!</p><p>It’s been multiple months since our last minor version bump. This new release bring lots of new features and strive at improving the composability features (first introduced in 0.17).</p><h2 id=new-features>New features!</h2><h3 id=storing-prompt-answers>Storing prompt answers</h3><p>Using the <code class=highlighter-rouge>{store: true}</code> property on a prompt will store the user answers in a machine global storage. This mean next time the user run a generator, the default answer will be filled with the value previously stored.</p><p>Careful notice, providing a default value prevent user from returning empty answers.</p><p>Huge thanks to @stefanbuck for the PR https://github.com/yeoman/generator/pull/688</p><h3 id=new-file-system>New File System</h3><p>Since version 0.17, the Yeoman file system proved to be poorly designed to attack composability issues. That’s why with 0.18 we release a completely rethought file system abstraction. You can see the discussion and design process <a href=https://github.com/yeoman/generator/issues/658>taking place in this issue</a>.</p><p>Every legacy methods (<code class=highlighter-rouge>this.write</code>, <code class=highlighter-rouge>this.copy</code>, <a href=https://yeoman.io/generator/actions.html>etc</a>) have been back ported to use this new system. So updating to 0.18.0 should magically improve your generator.</p><h4 id=new-fs-methods>New <code class=highlighter-rouge>fs</code> methods</h4><p>The core system can be accessed on <code class=highlighter-rouge>generator.fs</code>. This object is an instance of <a href=https://github.com/SBoudrias/mem-fs-editor>mem-fs-editor</a> and provide the same methods.</p><p>This system is way simpler than the current legacy method and doesn’t do any kind of magic. It won’t automatically compile templates (use <code class=highlighter-rouge>this.fs.copyTpl()</code> for this), it won’t pass <code class=highlighter-rouge>this</code> as template context, and it won’t automatically assume paths are relative to anything.</p><p>An example/usual usage would be:</p><div class="language-js highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=k>this</span><span class=p>.</span><span class=nx>fs</span><span class=p>.</span><span class=nx>copyTpl</span><span class=p>(</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>templatePath</span><span class=p>(</span><span class=s1>'mocha/base-test.js'</span><span class=p>),</span>
  <span class=k>this</span><span class=p>.</span><span class=nx>destinationPath</span><span class=p>(</span><span class=s1>'test/index.js'</span><span class=p>),</span>
  <span class=p>{</span> <span class=na>projectName</span><span class=p>:</span> <span class=s1>'my-awesome-module'</span> <span class=p>}</span>
<span class=p>)</span>
</code></pre></div></div><p>As you can see, we also added two new paths helpers:</p><ol><li><code class=highlighter-rouge>this.templatePath()</code> which is: <code class=highlighter-rouge>path.join(this.sourceRoot(), ...rest)</code></li> <li><code class=highlighter-rouge>this.destinationPath()</code> which is: <code class=highlighter-rouge>path.join(this.destinationRoot(), ...rest)</code></li></ol><p>Try it out and please give us feedback on how you like this new API. It is more verbose than our legacy methods, but it is clearer and less magical.</p><p><em>Note that the legacy system will remain available at least until version 1.0.0</em></p><h4 id=what-about-the-0170-thissrc-and-thisdest-file-utils>What about the 0.17.0 <code class=highlighter-rouge>this.src</code> and <code class=highlighter-rouge>this.dest</code> file utils</h4><p>These should be considered deprecated. The design decision they make isn’t a good fit with composability and will create issues on the long run.</p><h4 id=file-writing-filters>File writing filters</h4><p>Ever wished to apply custom filters on every file write? Beautifying files, normalizing whitespace, etc, is now possible.</p><p>Once per Yeoman process, we will write every modified files to disk. This process is passed through a <a href=https://github.com/wearefractal/vinyl>vinyl</a> object stream (just like <a href=http://gulpjs.com/ >gulp</a>). Any author can register a <code class=highlighter-rouge>transformStream</code> to modify the file path or content.</p><p>For example:</p><div class="language-js highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=kd>var</span> <span class=nx>beautify</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>'gulp-beautify'</span><span class=p>);</span>
<span class=k>this</span><span class=p>.</span><span class=nx>registerTransformStream</span><span class=p>(</span><span class=nx>beautify</span><span class=p>({</span><span class=na>indentSize</span><span class=p>:</span> <span class=mi>2</span> <span class=p>}));</span>
</code></pre></div></div><p>Note that <strong>every file type will be passed through this stream</strong>. So make sure any transform stream passthrough unsupported files. Tools like <a href=https://github.com/robrich/gulp-if>gulp-if</a> or <a href=https://github.com/sindresorhus/gulp-filter>gulp-filter</a> will help filter invalid type and pass them through.</p><p>This new feature means you can basically use any <em>gulp</em> plugins to process generated files during the writing phase.</p><h2 id=improvements>Improvements</h2><ul><li>Tests <a href=https://yeoman.io/authoring/testing.html>using <code class=highlighter-rouge>helpers.run()</code></a> won’t output to the console keeping the test output clean. Every log method is now a <code class=highlighter-rouge>sinon.stub()</code> making it easy to assert your generator outputted the correct content.</li> <li>Testing run context now automatically run your tests in a unique tmpdir. No need to manually call <code class=highlighter-rouge>helper.run().inDir()</code> anymore.</li> <li><code class=highlighter-rouge>assert.fileContent</code> and <code class=highlighter-rouge>assert.noFileContent</code> accept a String as arguments (before we just accepted Regex)</li> <li>The Conflicter have been refactored to be simple and easy to use.</li></ul><h3 id=installation-methods-only-running-once>Installation methods only running once</h3><p><code class=highlighter-rouge>npm</code> and <code class=highlighter-rouge>bower</code> installation helpers are now always running once per process. This was a change made in 0.17, but we extended the feature to cover every use/methods who could launch these process.</p><p>This was a breaking an edge case in 0.17. But for the sake of clarity, let’s be clear. The following construct will break:</p><div class="language-js highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=k>this</span><span class=p>.</span><span class=nx>installDependencies</span><span class=p>({</span>
  <span class=na>callback</span><span class=p>:</span> <span class=k>this</span><span class=p>.</span><span class=k>async</span><span class=p>()</span> <span class=c1>// This will block the process forever, and node will fail</span>
<span class=p>});</span>
</code></pre></div></div><p>Every install method will be registered on the <a href=https://yeoman.io/authoring/running-context.html><code class=highlighter-rouge>install</code> run queue</a>. Using <code class=highlighter-rouge>this.async()</code> as a callback will create a deadlock.</p><h2 id=fixes>Fixes</h2><ul><li>Installation methods (npm, bower helpers) now correctly pass the options to the spawn process.</li> <li>When a conflict occurs on a directory, we don’t show the <code class=highlighter-rouge>diff</code> option anymore. (selecting diff on directory threw an error)</li> <li>You can now correctly overwrite the <code class=highlighter-rouge>stdio</code> with <code class=highlighter-rouge>generator.spawnCommand()</code></li> <li><code class=highlighter-rouge>generator.composeWith()</code> now correctly resolve the <code class=highlighter-rouge>local</code> option path.</li></ul><h2 id=meta>Meta</h2><ul><li>We’ve extracted <a href=https://github.com/yeoman/environment>yeoman-environment</a> on it’s own repository. This mean these two core Yeoman parts can now evolve at their own pace.</li> <li>All our tests now uses tmpdir for testing making them more reliable.</li> <li>Completely remove network connection from our test suite - it is now way faster.</li></ul><h2 id=potentially-breaking-change>Potentially breaking change</h2><ul><li>We stopped manually mocking Inquirer in tests. Mainly because Inquirer parses values in ways we didn’t imitate and this caused too much issue. Now we rely more on Inquirer and only mock the minimum. This also mean we don’t create the magic <code class=highlighter-rouge>errors</code> property during test. You can listen for generator errors instead.</li> <li>We removed <code class=highlighter-rouge>require('yeoman-generator').inquirer</code>. Require your own version from now on.</li> <li>We removed <code class=highlighter-rouge>generator.shell</code> and <code class=highlighter-rouge>generator.request</code>. Require your own version.</li></ul><h2 id=in-conclusion>In conclusion</h2><p>The work is still not completed. We still need to update some of our website documentation to include the new APIs methods. And we’ll need to update our core generators to this new version. These should come soon, in the meantime refer to this post about the new features.</p><p>So, enjoy this new release! Please upgrade and let us know how the API feels, and as usual feel free to report any bug you encounter!</p><p>Cheers</p></div><hr><a href=/blog/ >« View More Posts</a></section></section></article></div></div><footer class=SiteFooter><div class=SiteFooter-donation><div class=Donation><div class=Donation-sticker-clipping><img src=/static/yeoman-character-sticker.51cef7e007.png class=Donation-sticker width=190 height=294 alt=Stickers!></div><div class=Donation-text><a href=https://yeoman.threadless.com/ >Show your love for <strong>Yeoman</strong>, <br> wear our <strong>merch</strong>!</a></div></div></div><ul class=SiteFooter-links><li><a href=https://plus.google.com/101063139999404044459/posts class=icon><img src=/static/social-gplus.5223e7bc73.svg class=SiteFooter-icon alt=Google+></a></li> <li><a href=https://twitter.com/yeoman class=icon><img src=/static/social-twitter.c359540fc8.svg class=SiteFooter-icon alt=Twitter></a></li> <li><a href=https://github.com/yeoman/yeoman class=icon><img src=/static/social-github.89959ef390.svg class=SiteFooter-icon alt=Github></a></li> <li><a href=/blog/atom.xml class=icon><img src=/static/social-feed.ad4bea7819.svg class=SiteFooter-icon alt=Feed></a></li> <li class=mobile-ln></li> <li><a href=https://yeoman.io/generator/ class="SiteFooter-button SiteFooter-button--light">API</a></li> <li><a href=https://github.com/yeoman/yeoman.github.io/blob/source/app/_posts/blog/2014-10-14-release-0.18.md class=SiteFooter-button title="Edit this page on Github to help improve the site">Improve this page</a></li></ul></footer><script src=//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js></script><script src=/static/bundle-4897.f58dbfb7a4.js async></script><script>!function(a,b,c){'undefined'!=typeof c.module&&c.module.exports?c.module.exports=b():'undefined'!=typeof c.define&&'function'==c.define&&c.define.amd?define(a,b):c[a]=b()}('$script',function(){function a(a,b){for(var c=0,d=a.length;c<d;++c)if(!b(a[c]))return m;return 1}function b(b,c){a(b,function(a){return!c(a)})}function c(f,g,m){function o(a){return a.call?a():i[a]}function p(){if(!--t){i[s]=1,r&&r();for(var c in k)a(c.split('|'),o)&&!b(k[c],o)&&(k[c]=[])}}f=f[n]?f:[f];var q=g&&g.call,r=q?g:m,s=q?f.join(''):g,t=f.length;return setTimeout(function(){b(f,function(a){return l[a]?(s&&(j[s]=1),2==l[a]&&p()):(l[a]=1,s&&(j[s]=1),d(!h.test(a)&&e?e+a+'.js':a,p),void 0)})},0),c}function d(a,b){var c=f.createElement('script'),d=m;c.onload=c.onerror=c[r]=function(){c[p]&&!/^c|loade/.test(c[p])||d||(c.onload=c[r]=null,d=1,l[a]=2,b())},c.async=1,c.src=a,g.insertBefore(c,g.firstChild)}var e,f=document,g=f.getElementsByTagName('head')[0],h=/^https?:\/\//,i={},j={},k={},l={},m=!1,n='push',o='DOMContentLoaded',p='readyState',q='addEventListener',r='onreadystatechange';return!f[p]&&f[q]&&(f[q](o,function s(){f.removeEventListener(o,s,m),f[p]='complete'},m),f[p]='loading'),c.get=d,c.order=function(a,b,d){!function e(f){f=a.shift(),a.length?c(f,e):c(f,b,d)}()},c.path=function(a){e=a},c.ready=function(d,e,f){d=d[n]?d:[d];var g=[];return!b(d,function(a){i[a]||g[n](a)})&&a(d,function(a){return i[a]})?e():!function(a){k[a]=k[a]||[],k[a][n](e),f&&f(g)}(d.join('|')),c},c},this);var _gaq=[['_setAccount','UA-32956520-1'],['_setDomainName','.yeoman.io'],['_trackPageview'],['_trackPageLoadTime']];$script('https://www.google-analytics.com/ga.js'),$script('https://apis.google.com/js/plusone.js'),$script('//platform.twitter.com/widgets.js')//# sourceMappingURL=../static/yeoman-5000.7bd5b2c42d.map </script></div></body></html>